<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin from First Principles - The Complete Interactive Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #404040 100%);
            min-height: 100vh;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #ff8c00, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .principle-tracker {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .principle-bar {
            background: #404040;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }

        .principle-fill {
            background: linear-gradient(45deg, #ff8c00, #ffd700);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .principle-section {
            background: linear-gradient(135deg, #2d2d2d 0%, #404040 100%);
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #ff8c00;
            transition: all 0.3s ease;
        }

        .principle-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 140, 0, 0.2);
        }

        .principle-header {
            background: linear-gradient(45deg, #ff8c00, #ffd700);
            color: black;
            padding: 20px 30px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.3rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .principle-header:hover {
            background: linear-gradient(45deg, #ffa500, #ffff00);
        }

        .principle-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .principle-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background: #2d2d2d;
        }

        .principle-content.active {
            max-height: 5000px;
        }

        .principle-inner {
            padding: 30px;
        }

        .problem-box {
            background: rgba(220, 53, 69, 0.1);
            border: 2px solid #dc3545;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .problem-box::before {
            content: "🚨 ";
            font-size: 1.2rem;
        }

        .solution-box {
            background: rgba(40, 167, 69, 0.1);
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .solution-box::before {
            content: "💡 ";
            font-size: 1.2rem;
        }

        .insight-box {
            background: rgba(255, 140, 0, 0.1);
            border: 2px solid #ff8c00;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .insight-box::before {
            content: "🧠 ";
            font-size: 1.2rem;
        }

        .demo-container {
            background: #404040;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #ff8c00;
        }

        .btn {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.4);
            background: linear-gradient(45deg, #6366f1, #8b5cf6);
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .btn-success:hover {
            background: linear-gradient(45deg, #218838, #1abc9c);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .trust-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .trust-card {
            background: #333366;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #666;
            transition: all 0.3s ease;
        }

        .trust-card.trusted {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .trust-card.untrusted {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .double-spend-demo {
            background: #0f0f23;
            border: 2px solid #4f46e5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .transaction-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
            padding: 15px;
            background: #2d2d5f;
            border-radius: 8px;
        }

        .person {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
        }

        .arrow {
            font-size: 2rem;
            color: #4f46e5;
            margin: 0 10px;
        }

        .coin {
            background: #ffd700;
            color: #000;
            padding: 8px 12px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .consensus-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .node {
            background: #333366;
            border: 2px solid #666;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .node.honest {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .node.dishonest {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .ledger-demo {
            background: #1a1a3a;
            border: 2px solid #4f46e5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .ledger-entry {
            background: #2d2d5f;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .entry-time {
            color: #4f46e5;
            font-weight: bold;
        }

        .entry-tx {
            color: #ffffff;
            flex: 1;
            margin: 0 15px;
        }

        .entry-balance {
            color: #28a745;
            font-weight: bold;
        }

        .mining-visual {
            background: #0f0f23;
            border: 2px solid #4f46e5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .puzzle-demo {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .puzzle-piece {
            background: #333366;
            border: 2px solid #666;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .puzzle-piece:hover {
            border-color: #4f46e5;
        }

        .puzzle-piece.solved {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: #333366;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #4f46e5;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4f46e5;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #cccccc;
            font-size: 0.9rem;
        }

        .hash-display {
            background: #0f0f23;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border: 2px solid #4f46e5;
            word-break: break-all;
        }

        .chain-visual {
            display: flex;
            align-items: center;
            overflow-x: auto;
            padding: 20px 0;
            margin: 20px 0;
        }

        .block {
            background: #2d2d5f;
            border: 2px solid #4f46e5;
            border-radius: 10px;
            padding: 15px;
            margin: 0 10px;
            min-width: 150px;
            text-align: center;
            font-family: monospace;
            font-size: 0.8rem;
        }

        .block-link {
            color: #4f46e5;
            font-size: 2rem;
            margin: 0 5px;
        }

        .scenario-explorer {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .scenario-question {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: #ffd700;
        }
        
        /* New styles for principles 3-9 */
        .consensus-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .node {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.8rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .node.dishonest {
            background: linear-gradient(45deg, #dc3545, #c82333);
        }
        
        .ledger-demo {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .ledger-entry {
            display: grid;
            grid-template-columns: 100px 1fr 150px;
            gap: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            margin: 5px 0;
            font-size: 0.9rem;
        }

        /* Enhanced Mobile Optimizations */
        /* New Interactive Elements CSS */
        .money-properties-demo {
            margin: 20px 0;
        }
        
        .money-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .money-option {
            background: rgba(79, 70, 229, 0.1);
            border: 2px solid rgba(79, 70, 229, 0.3);
            border-radius: 10px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .money-option:hover, .money-option.active {
            background: rgba(79, 70, 229, 0.2);
            border-color: #4f46e5;
            transform: translateY(-2px);
        }
        
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .property-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .property-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
        }
        
        .property-score {
            font-size: 1.5rem;
            margin: 10px 0;
            color: #ffd700;
        }
        
        .property-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .timeline-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
            padding: 20px 0;
        }
        
        .timeline-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(to right, #4f46e5, #7c3aed);
            z-index: 1;
        }
        
        .timeline-item {
            background: rgba(15, 15, 15, 0.9);
            border: 2px solid #4f46e5;
            border-radius: 15px;
            padding: 10px;
            min-width: 120px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            position: relative;
        }
        
        .timeline-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(79, 70, 229, 0.4);
        }
        
        .timeline-year {
            font-size: 0.8rem;
            color: #4f46e5;
            font-weight: bold;
        }
        
        .timeline-content {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .ledger-keeper-demo {
            margin: 20px 0;
        }
        
        .keeper-scenario {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .keeper-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .keeper-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }
        
        .keeper-option:hover {
            border-color: #4f46e5;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(79, 70, 229, 0.3);
        }
        
        .keeper-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .keeper-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #4f46e5;
        }
        
        .keeper-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .trust-failure-timeline {
            background: rgba(220, 53, 69, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        
        .failure-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .failure-card {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .failure-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(220, 53, 69, 0.4);
            border-color: #dc3545;
        }
        
        .failure-year {
            font-size: 0.8rem;
            color: #dc3545;
            font-weight: bold;
        }
        
        .failure-title {
            font-size: 0.9rem;
            margin: 5px 0;
            font-weight: bold;
        }
        
        .failure-impact {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
                line-height: 1.2;
            }
            
            .header p {
                font-size: 1rem;
                padding: 0 10px;
            }
            
            .container {
                padding: 10px;
            }
            
            .principle-inner {
                padding: 15px;
            }
            
            .principle-header {
                padding: 15px 20px;
                font-size: 1.1rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .principle-icon {
                align-self: flex-end;
                margin-top: -30px;
            }
            
            .trust-demo {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .consensus-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .puzzle-demo {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .transaction-flow {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            
            .arrow {
                transform: rotate(90deg);
                font-size: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .chain-visual {
                flex-direction: column;
                align-items: center;
            }
            
            .block {
                margin: 10px 0;
                width: 100%;
                max-width: 200px;
            }
            
            .block-link {
                transform: rotate(90deg);
            }
            
            .hash-display {
                font-size: 0.8rem;
                padding: 10px;
            }
            
            .ledger-entry {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }
            
            .btn {
                font-size: 0.9rem;
                padding: 10px 18px;
                margin: 3px;
                width: 100%;
                max-width: none;
            }
            
            input[type="text"], input[type="number"] {
                width: 100% !important;
                margin: 10px 0;
                box-sizing: border-box;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .principle-header {
                padding: 12px 15px;
                font-size: 1rem;
            }
            
            .principle-inner {
                padding: 12px;
            }
            
            .consensus-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .puzzle-demo {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .trust-card, .stat-card, .node, .puzzle-piece {
                padding: 12px;
                font-size: 0.9rem;
            }
            
            .demo-container, .problem-box, .solution-box, .insight-box {
                padding: 15px;
                margin: 15px 0;
            }
            
            .btn {
                font-size: 0.85rem;
                padding: 8px 15px;
            }
            
            .money-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .properties-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 10px;
            }
            
            .timeline-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .timeline-container::before {
                display: none;
            }
            
            .keeper-options {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 10px;
            }
            
            .failure-examples {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bitcoin from First Principles</h1>
            <p>Understanding Bitcoin by building it from the ground up - starting with the fundamental problem it solves</p>
        </div>

        <div class="principle-tracker">
            <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px;">
                Your First Principles Journey: <span id="progress-text">0/10 Principles Understood</span>
            </div>
            <div class="principle-bar">
                <div class="principle-fill" id="progress-fill" style="width: 0%;"></div>
            </div>
            <p style="color: #cccccc; margin-top: 10px;">Each principle builds logically on the previous ones</p>
        </div>

        <!-- Course Preview Section -->
        <div style="text-align: center; margin: 40px 0; padding: 30px; background: rgba(255,255,255,0.1); border-radius: 15px;">
            <h2 style="color: #4f46e5; margin-bottom: 15px;">🎯 What You'll Learn in This Journey</h2>
            <p style="font-size: 1.1rem; margin-bottom: 20px;">
                This comprehensive interactive guide contains 10 principles that build 
                logically to explain how Bitcoin works from first principles.
            </p>
            <div class="insight-box">
                <h3 style="color: #4f46e5; margin-bottom: 15px;">Your Learning Path:</h3>
                <ul style="text-align: left; margin-left: 40px;">
                    <li>The consensus problem and how strangers agree</li>
                    <li>Proof of work and why it makes attacks expensive</li>
                    <li>The blockchain structure and immutable history</li>
                    <li>Digital signatures and ownership proofs</li>
                    <li>Economic incentives that make honesty profitable</li>
                    <li>Network effects and Bitcoin's growing strength</li>
                    <li>Digital scarcity and true financial sovereignty</li>
                </ul>
            </div>
            <p style="color: #cccccc; font-style: italic; margin-top: 15px;">
                Each principle reveals a piece of Bitcoin's genius. Together, they show why Bitcoin is inevitable.
            </p>
        </div>

        <!-- Principle 0: Why Money Fails -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(0)">
                <span>Principle 0: Why Money Fails (The Properties of Sound vs. Unsound Money)</span>
                <span class="principle-icon" id="icon-0">▼</span>
            </div>
            <div class="principle-content" id="content-0">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"What makes money 'good' or 'bad'? Why do some forms of money survive while others fail?"</strong>
                        </p>
                        <p>
                            Throughout history, humans have used shells, stones, metals, and paper as money. 
                            Each had different properties that made them succeed or fail. Understanding these 
                            properties reveals why Bitcoin might be the ultimate form of money.
                        </p>
                    </div>
                    
                    <div class="demo-container">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Money Properties Comparison</h4>
                        
                        <div class="money-properties-demo">
                            <p style="margin-bottom: 20px;">
                                Good money must have specific properties. Let's compare different forms of money across these properties:
                            </p>
                            
                            <div class="money-selector" style="margin: 20px 0;">
                                <button type="button" class="btn money-option active" onclick="selectMoney('shells')" id="btn-shells">🐚 Shells</button>
                                <button type="button" class="btn money-option" onclick="selectMoney('gold')" id="btn-gold">🥇 Gold</button>
                                <button type="button" class="btn money-option" onclick="selectMoney('fiat')" id="btn-fiat">💵 Fiat</button>
                                <button type="button" class="btn money-option" onclick="selectMoney('bitcoin')" id="btn-bitcoin">₿ Bitcoin</button>
                            </div>
                            
                            <div id="money-properties-grid" class="properties-grid">
                                <div class="property-card">
                                    <h4>Scarcity</h4>
                                    <div class="property-score" id="score-scarcity">⭐⭐⭐</div>
                                    <p class="property-desc" id="desc-scarcity">Limited supply is crucial</p>
                                </div>
                                <div class="property-card">
                                    <h4>Durability</h4>
                                    <div class="property-score" id="score-durability">⭐⭐</div>
                                    <p class="property-desc" id="desc-durability">Must withstand time</p>
                                </div>
                                <div class="property-card">
                                    <h4>Divisibility</h4>
                                    <div class="property-score" id="score-divisibility">⭐</div>
                                    <p class="property-desc" id="desc-divisibility">Can be split into small units</p>
                                </div>
                                <div class="property-card">
                                    <h4>Portability</h4>
                                    <div class="property-score" id="score-portability">⭐⭐</div>
                                    <p class="property-desc" id="desc-portability">Easy to transport</p>
                                </div>
                                <div class="property-card">
                                    <h4>Verifiability</h4>
                                    <div class="property-score" id="score-verifiability">⭐⭐</div>
                                    <p class="property-desc" id="desc-verifiability">Can prove authenticity</p>
                                </div>
                                <div class="property-card">
                                    <h4>Fungibility</h4>
                                    <div class="property-score" id="score-fungibility">⭐⭐⭐</div>
                                    <p class="property-desc" id="desc-fungibility">All units are equal</p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px;">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Historical Money Timeline</h4>
                            <div class="timeline-container">
                                <div class="timeline-item" onclick="showTimelineEvent('barter')">
                                    <div class="timeline-year">10,000 BCE</div>
                                    <div class="timeline-content">🔄 Barter System</div>
                                </div>
                                <div class="timeline-item" onclick="showTimelineEvent('commodity')">
                                    <div class="timeline-year">3000 BCE</div>
                                    <div class="timeline-content">🌾 Commodity Money</div>
                                </div>
                                <div class="timeline-item" onclick="showTimelineEvent('metal')">
                                    <div class="timeline-year">700 BCE</div>
                                    <div class="timeline-content">🪙 Metal Coins</div>
                                </div>
                                <div class="timeline-item" onclick="showTimelineEvent('gold')">
                                    <div class="timeline-year">1792</div>
                                    <div class="timeline-content">🏛️ Gold Standard</div>
                                </div>
                                <div class="timeline-item" onclick="showTimelineEvent('fiat')">
                                    <div class="timeline-year">1971</div>
                                    <div class="timeline-content">💵 Fiat Currency</div>
                                </div>
                                <div class="timeline-item" onclick="showTimelineEvent('bitcoin')">
                                    <div class="timeline-year">2009</div>
                                    <div class="timeline-content">₿ Bitcoin</div>
                                </div>
                            </div>
                            <div id="timeline-result" style="margin-top: 20px;"></div>
                        </div>
                    </div>
                    
                    <div class="problem-box" style="margin-top: 30px;">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Evolution of Money:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Each form improved on previous limitations:</strong> Shells → Metals → Paper → Digital</li>
                            <li><strong>But trade-offs remained:</strong> Scarcity vs. portability, durability vs. divisibility</li>
                            <li><strong>Fiat money sacrificed scarcity for convenience</strong> - leading to inflation and control</li>
                            <li><strong>Bitcoin attempts to optimize all properties simultaneously</strong> through cryptography</li>
                        </ul>
                    </div>
                    
                    <div class="insight-box" style="margin-top: 20px;">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">The Fundamental Question:</h4>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"What if there was money that no one could inflate, freeze, confiscate, or control except you?"</strong>
                        </p>
                        <p>
                            This is what Bitcoin attempts to solve. Not just a technical problem, but a human problem: 
                            How do we create money that serves people, not the other way around?
                        </p>
                    </div>
                    
                    <button type="button" class="btn btn-success" onclick="completePrinciple(0)">I Understand Why We Need Better Money</button>
                </div>
            </div>
        </div>

        <!-- Principle 1: The Fundamental Problem -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(1)">
                <span>Principle 1: The Double-Spending Problem (The Core Challenge)</span>
                <span class="principle-icon" id="icon-1">▼</span>
            </div>
            <div class="principle-content" id="content-1">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How can we create digital money that can't be copied?"</strong>
                        </p>
                        <p>
                            This is the fundamental problem Bitcoin solves. Physical money can't be in two places at once, 
                            but digital files can be copied infinitely. How do we prevent someone from spending the same 
                            digital coin twice?
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Problem: Digital Copying</h4>
                        <p style="margin-bottom: 15px;">
                            Unlike physical objects, digital information can be perfectly copied. If I send you a digital photo, 
                            I still have the original. But if digital money worked this way, I could spend the same coin 
                            with multiple people!
                        </p>
                        
                        <div class="double-spend-demo">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: The Double-Spending Attack</h4>
                            
                            <div class="transaction-flow">
                                <div class="person">Alice</div>
                                <div class="arrow">→</div>
                                <div class="coin" id="coin1">1 BTC</div>
                                <div class="arrow">→</div>
                                <div class="person">Bob</div>
                            </div>
                            
                            <div class="transaction-flow">
                                <div class="person">Alice</div>
                                <div class="arrow">→</div>
                                <div class="coin" id="coin2" style="opacity: 0.5;">1 BTC?</div>
                                <div class="arrow">→</div>
                                <div class="person">Charlie</div>
                            </div>
                            
                            <button type="button" class="btn" onclick="attemptDoubleSpend()">Try Double-Spending Attack</button>
                            <div id="double-spend-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: We Need a Global Ledger</h4>
                        <p>
                            The solution is to maintain a single, shared record (ledger) of who owns what. 
                            Every transaction must be recorded, and everyone must agree on the current state. 
                            This prevents double-spending because the ledger shows each coin can only be spent once.
                        </p>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(1)">I Understand the Double-Spending Problem</button>
                </div>
            </div>
        </div>

        <!-- Principle 2: The Trust Problem -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(2)">
                <span>Principle 2: The Trust Problem (Who Controls the Ledger?)</span>
                <span class="principle-icon" id="icon-2">▼</span>
            </div>
            <div class="principle-content" id="content-2">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"If we need someone to maintain the ledger, who can we trust to never cheat?"</strong>
                        </p>
                        <p>
                            Digital payments require a ledger showing who owns what. But this creates a massive problem: 
                            whoever controls the ledger has immense power. They can freeze accounts, reverse transactions, 
                            or create money for themselves. History shows us that this power is always abused eventually.
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Core Trust Dilemma</h4>
                        <p style="margin-bottom: 15px;">
                            Every digital payment system requires someone to keep score. But giving anyone that power 
                            creates an irresistible incentive to abuse it. This is the fundamental trust problem that 
                            has plagued digital money since its inception.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: The Ledger Keeper's Dilemma</h4>
                            
                            <p style="margin-bottom: 20px;">
                                Imagine you need to choose who maintains the global ledger. Each option has different incentives and risks:
                            </p>
                            
                            <div class="ledger-keeper-demo">
                                <div class="keeper-scenario">
                                    <h4>Scenario: Choose Your Ledger Keeper</h4>
                                    <p>You have $1M in the system. Who do you trust to manage everyone's balances?</p>
                                    
                                    <div class="keeper-options">
                                        <button type="button" class="keeper-option" onclick="testLedgerKeeper('centralBank')" id="central-bank-btn">
                                            <div class="keeper-icon">🏛️</div>
                                            <div class="keeper-title">Central Bank</div>
                                            <div class="keeper-desc">Government controlled, regulated</div>
                                        </button>
                                        
                                        <button type="button" class="keeper-option" onclick="testLedgerKeeper('techCompany')" id="tech-company-btn">
                                            <div class="keeper-icon">🏢</div>
                                            <div class="keeper-title">Tech Company</div>
                                            <div class="keeper-desc">Profit-motivated, innovative</div>
                                        </button>
                                        
                                        <button type="button" class="keeper-option" onclick="testLedgerKeeper('cooperative')" id="cooperative-btn">
                                            <div class="keeper-icon">🤝</div>
                                            <div class="keeper-title">Cooperative</div>
                                            <div class="keeper-desc">Member-owned, democratic</div>
                                        </button>
                                        
                                        <button type="button" class="keeper-option" onclick="testLedgerKeeper('algorithm')" id="algorithm-btn">
                                            <div class="keeper-icon">⚡</div>
                                            <div class="keeper-title">Algorithm</div>
                                            <div class="keeper-desc">Code-based, no human control</div>
                                        </button>
                                    </div>
                                    
                                    <div id="ledger-keeper-result" style="margin-top: 20px;"></div>
                                </div>
                                
                                <div class="trust-failure-timeline" style="margin-top: 30px;">
                                    <h4 style="color: #dc3545;">Real Trust Failures in Digital Payments:</h4>
                                    <div class="failure-examples">
                                        <div class="failure-card" onclick="showTrustFailure('paypal')">
                                            <div class="failure-year">2010</div>
                                            <div class="failure-title">PayPal WikiLeaks</div>
                                            <div class="failure-impact">Froze donations</div>
                                        </div>
                                        <div class="failure-card" onclick="showTrustFailure('canada')">
                                            <div class="failure-year">2022</div>
                                            <div class="failure-title">Canadian Trucker</div>
                                            <div class="failure-impact">Froze protesters</div>
                                        </div>
                                        <div class="failure-card" onclick="showTrustFailure('russia')">
                                            <div class="failure-year">2022</div>
                                            <div class="failure-title">Russian SWIFT Ban</div>
                                            <div class="failure-impact">Cut off country</div>
                                        </div>
                                        <div class="failure-card" onclick="showTrustFailure('mt-gox')">
                                            <div class="failure-year">2014</div>
                                            <div class="failure-title">Mt. Gox Hack</div>
                                            <div class="failure-impact">Lost 850K BTC</div>
                                        </div>
                                    </div>
                                    <div id="trust-failure-result" style="margin-top: 15px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Revolutionary Insight: Eliminate the Trusted Party</h4>
                        <p>
                            What if we didn't need to trust anyone at all? What if the ledger could be maintained 
                            by thousands of independent computers, none of which you need to trust individually? 
                            If they all have to agree before anything changes, then no single party can cheat you.
                        </p>
                        <p style="margin-top: 10px;">
                            <strong>This leads us to the next challenge:</strong> How do you get thousands of strangers 
                            on the internet to agree on anything?
                        </p>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(2)">I Understand the Trust Problem</button>
                </div>
            </div>
        </div>

        <!-- Principle 3: The Consensus Problem -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(3)">
                <span>Principle 3: The Consensus Problem (How Do Strangers Agree?)</span>
                <span class="principle-icon" id="icon-3">▼</span>
            </div>
            <div class="principle-content" id="content-3">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How can thousands of strangers on the internet agree on a single version of truth?"</strong>
                        </p>
                        <p>
                            We want many independent parties to maintain the ledger, but how do they coordinate? 
                            What if they disagree? What if some are dishonest? How do we ensure they all 
                            converge on the same version of the ledger?
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Problem: Byzantine Generals</h4>
                        <p style="margin-bottom: 15px;">
                            This is known as the "Byzantine Generals Problem" - how do distributed parties 
                            coordinate when some might be dishonest or unreliable? In a network, some nodes 
                            might be malicious, offline, or simply mistaken.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Network Consensus</h4>
                            
                            <div class="consensus-grid">
                                <div class="node honest" id="node1">
                                    <div>Node 1</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote1">?</span></div>
                                </div>
                                <div class="node honest" id="node2">
                                    <div>Node 2</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote2">?</span></div>
                                </div>
                                <div class="node honest" id="node3">
                                    <div>Node 3</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote3">?</span></div>
                                </div>
                                <div class="node dishonest" id="node4">
                                    <div>Node 4</div>
                                    <div>Status: Dishonest</div>
                                    <div>Vote: <span id="vote4">?</span></div>
                                </div>
                                <div class="node honest" id="node5">
                                    <div>Node 5</div>
                                    <div>Status: Honest</div>
                                    <div>Vote: <span id="vote5">?</span></div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <p><strong>Scenario:</strong> Alice wants to send 1 BTC to Bob. Nodes must agree this transaction is valid.</p>
                                <button type="button" class="btn" onclick="simulateConsensus()">Simulate Consensus Vote</button>
                                <button type="button" class="btn" onclick="addMaliciousNodes()">Add More Malicious Nodes</button>
                            </div>
                            
                            <div id="consensus-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Majority Rule with Proof</h4>
                        <p>
                            The solution is majority rule - but not just any majority. We need a way to prevent 
                            someone from creating fake identities to outvote honest participants. Bitcoin solves 
                            this with "Proof of Work" - you must prove you've done computational work to vote.
                        </p>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(3)">I Understand the Consensus Problem</button>
                </div>
            </div>
        </div>

        <!-- Principle 4: The Proof of Work Solution -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(4)">
                <span>Principle 4: Proof of Work (Making Votes Expensive)</span>
                <span class="principle-icon" id="icon-4">▼</span>
            </div>
            <div class="principle-content" id="content-4">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How do we prevent someone from creating millions of fake identities to control the vote?"</strong>
                        </p>
                        <p>
                            In a digital system, creating new identities is free. An attacker could create 
                            millions of fake nodes to outvote honest participants. We need to make voting 
                            expensive so that honest participants naturally have more voting power.
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Problem: Sybil Attacks</h4>
                        <p style="margin-bottom: 15px;">
                            This is called a "Sybil Attack" - creating many fake identities to gain control. 
                            In traditional voting, we prevent this with identity verification. But in a 
                            decentralized system with no central authority, how do we verify identities?
                        </p>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Make Voting Expensive</h4>
                        <p style="margin-bottom: 15px;">
                            Instead of verifying identities, we make voting expensive. Each vote requires 
                            solving a difficult computational puzzle. This is "Proof of Work" - you must 
                            prove you've expended real-world resources (electricity, hardware) to vote.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Computational Puzzles</h4>
                            
                            <div class="mining-visual">
                                <p style="margin-bottom: 15px;">
                                    <strong>The Puzzle:</strong> Find a number that, when combined with transaction data, 
                                    creates a hash starting with four zeros (0000...).
                                </p>
                                
                                <div class="puzzle-demo">
                                    <div class="puzzle-piece" onclick="tryPuzzle(1)" id="puzzle1">
                                        <div>Try: 1</div>
                                        <div id="hash1">Click to hash</div>
                                    </div>
                                    <div class="puzzle-piece" onclick="tryPuzzle(2)" id="puzzle2">
                                        <div>Try: 2</div>
                                        <div id="hash2">Click to hash</div>
                                    </div>
                                    <div class="puzzle-piece" onclick="tryPuzzle(3)" id="puzzle3">
                                        <div>Try: 3</div>
                                        <div id="hash3">Click to hash</div>
                                    </div>
                                    <div class="puzzle-piece" onclick="tryPuzzle(4)" id="puzzle4">
                                        <div>Try: 4</div>
                                        <div id="hash4">Click to hash</div>
                                    </div>
                                </div>
                                
                                <button type="button" class="btn" onclick="autoSolvePuzzle()">Auto-Solve Puzzle</button>
                                <button type="button" class="btn" onclick="resetPuzzle()">Reset Puzzle</button>
                                
                                <div id="puzzle-result" style="margin-top: 15px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">Why This Works:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Expensive to Attack:</strong> Creating fake votes requires real electricity and hardware</li>
                            <li><strong>Honest Majority:</strong> Honest participants collectively have more resources than attackers</li>
                            <li><strong>Verifiable:</strong> Anyone can quickly verify that work was done</li>
                            <li><strong>Fair:</strong> More work = more voting power, regardless of identity</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(4)">I Understand Proof of Work</button>
                </div>
            </div>
        </div>

        <!-- Principle 5: The Blockchain Structure -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(5)">
                <span>Principle 5: The Chain Structure (Ordering Transactions in Time)</span>
                <span class="principle-icon" id="icon-5">▼</span>
            </div>
            <div class="principle-content" id="content-5">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How do we organize transactions in a way that creates an unchangeable history?"</strong>
                        </p>
                        <p>
                            We have proof of work for consensus, but how do we structure the ledger itself? 
                            We need a way to organize transactions that makes it extremely difficult to 
                            change past records while allowing new ones to be added.
                        </p>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Chain Blocks Together</h4>
                        <p style="margin-bottom: 15px;">
                            Group transactions into "blocks" and chain them together cryptographically. 
                            Each block contains a reference to the previous block. To change an old 
                            transaction, you'd have to redo all the work for that block and every 
                            block that came after it.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Building the Chain</h4>
                            
                            <div class="ledger-demo">
                                <h4 style="color: #4f46e5; margin-bottom: 15px;">Current Ledger State:</h4>
                                <div id="ledger-entries">
                                    <div class="ledger-entry">
                                        <div class="entry-time">Genesis</div>
                                        <div class="entry-tx">System creates 50 BTC for Alice</div>
                                        <div class="entry-balance">Alice: 50 BTC</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <label for="new-tx" style="display: block; margin-bottom: 5px; color: #ffffff;">Transaction Details:</label>
                                <input type="text" id="new-tx" placeholder="Enter transaction (e.g., 'Alice sends 10 BTC to Bob')" style="width: 70%; padding: 10px; border: 2px solid #4f46e5; border-radius: 5px; background: #2d2d5f; color: #ffffff; margin-right: 10px;">
                                <button type="button" class="btn" onclick="addTransaction()">Add Transaction</button>
                            </div>
                            
                            <div class="chain-visual" id="chain-visual">
                                <div class="block">
                                    <div>Block 0</div>
                                    <div>Genesis</div>
                                    <div>Hash: 000a...</div>
                                </div>
                            </div>
                            
                            <button type="button" class="btn" onclick="attemptTamper()">Try to Change Block 1</button>
                            <div id="tamper-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="insight-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">Why Chaining Works:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Immutability:</strong> Changing old data requires redoing all subsequent work</li>
                            <li><strong>Chronological Order:</strong> Blocks create a clear timeline of events</li>
                            <li><strong>Cumulative Security:</strong> Each new block makes all previous blocks more secure</li>
                            <li><strong>Verifiable History:</strong> Anyone can verify the entire history from the beginning</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(5)">I Understand the Chain Structure</button>
                </div>
            </div>
        </div>

        <!-- Principle 6: Digital Signatures -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(6)">
                <span>Principle 6: Digital Signatures (Proving Ownership Without Revealing Secrets)</span>
                <span class="principle-icon" id="icon-6">▼</span>
            </div>
            <div class="principle-content" id="content-6">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How can someone prove they own Bitcoin without revealing their private key?"</strong>
                        </p>
                        <p>
                            We have a secure ledger, but how do we prove ownership of Bitcoin? We need a way 
                            for people to prove they have the right to spend certain Bitcoin without revealing 
                            their secret key to everyone.
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Problem: Proving Ownership</h4>
                        <p style="margin-bottom: 15px;">
                            If we use passwords or secret keys directly, anyone who sees the transaction 
                            could steal the key and spend the Bitcoin themselves. We need a way to prove 
                            we know the secret without revealing the secret itself.
                        </p>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Public-Key Cryptography</h4>
                        <p style="margin-bottom: 15px;">
                            Use public-key cryptography! Generate a pair of keys: a private key (secret) and 
                            a public key (shareable). You can create a digital signature with your private 
                            key that proves you own the corresponding public key, without revealing the private key.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Digital Signatures</h4>
                            
                            <div style="margin: 20px 0;">
                                <button type="button" class="btn" onclick="generateKeyPair()">Generate Key Pair</button>
                                
                                <div style="margin: 15px 0;">
                                    <p><strong>Private Key (Keep Secret!):</strong></p>
                                    <div class="hash-display" id="private-key">Click "Generate Key Pair" first</div>
                                </div>
                                
                                <div style="margin: 15px 0;">
                                    <p><strong>Public Key (Share Freely):</strong></p>
                                    <div class="hash-display" id="public-key">Generate keys first</div>
                                </div>
                                
                                <div style="margin: 15px 0;">
                                    <input type="text" id="message-to-sign" placeholder="Enter message to sign (e.g., 'Send 1 BTC to Alice')" title="Message to create digital signature for" style="width: 70%; padding: 10px; border: 2px solid #4f46e5; border-radius: 5px; background: #2d2d5f; color: #ffffff; margin-right: 10px;">
                                    <button type="button" class="btn" onclick="signMessage()">Sign Message</button>
                                </div>
                                
                                <div style="margin: 15px 0;">
                                    <p><strong>Digital Signature:</strong></p>
                                    <div class="hash-display" id="signature">Sign a message first</div>
                                </div>
                                
                                <button type="button" class="btn" onclick="verifySignature()">🔍 Verify Signature</button>
                                <button type="button" class="btn" onclick="simulateInvalidSignature()" style="background: linear-gradient(45deg, #dc3545, #c82333); margin-left: 10px;">⚠️ Try Invalid Signature</button>
                                <div id="signature-result" style="margin-top: 15px;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">How Bitcoin Uses This:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Bitcoin Addresses:</strong> Derived from public keys</li>
                            <li><strong>Transaction Authorization:</strong> Signed with private keys</li>
                            <li><strong>Ownership Proof:</strong> Only the private key holder can create valid signatures</li>
                            <li><strong>Public Verification:</strong> Anyone can verify signatures using public keys</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(6)">I Understand Digital Signatures</button>
                </div>
            </div>
        </div>

        <!-- Principle 7: Economic Incentives -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(7)">
                <span>Principle 7: Economic Incentives (Making Honesty Profitable)</span>
                <span class="principle-icon" id="icon-7">▼</span>
            </div>
            <div class="principle-content" id="content-7">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"Why would anyone spend electricity and hardware to maintain the Bitcoin network?"</strong>
                        </p>
                        <p>
                            We have the technical solution, but we need people to actually run it. 
                            Proof of work requires expensive computation. Why would rational actors 
                            spend their own resources to secure a network for strangers?
                        </p>
                    </div>
                    
                    <div class="problem-box">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">The Problem: Free Rider Problem</h4>
                        <p style="margin-bottom: 15px;">
                            Everyone benefits from a secure network, but securing it is expensive. 
                            Without incentives, everyone would want others to pay the costs while 
                            they enjoy the benefits for free. This would lead to an insecure network.
                        </p>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Reward Honest Behavior</h4>
                        <p style="margin-bottom: 15px;">
                            Create economic incentives that make honest behavior profitable. Miners who 
                            successfully add blocks to the chain receive newly created Bitcoin plus 
                            transaction fees. This aligns individual profit with network security.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Mining Economics</h4>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="block-reward">6.25</div>
                                    <div class="stat-label">Block Reward (BTC)</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="tx-fees">0.15</div>
                                    <div class="stat-label">Transaction Fees (BTC)</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="total-reward">6.40</div>
                                    <div class="stat-label">Total Reward (BTC)</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="btc-price">$43,000</div>
                                    <div class="stat-label">BTC Price (USD)</div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <p><strong>Mining Profitability Calculator:</strong></p>
                                <div style="margin: 15px 0;">
                                    <label>Electricity Cost ($/kWh): </label>
                                    <input type="number" id="electricity-cost" value="0.10" step="0.01" title="Electricity cost per kilowatt-hour in USD" style="padding: 5px; border: 2px solid #4f46e5; border-radius: 5px; background: #2d2d5f; color: #ffffff;">
                                </div>
                                <div style="margin: 15px 0;">
                                    <label>Hash Rate (TH/s): </label>
                                    <input type="number" id="hash-rate" value="100" min="1" max="1000000" title="Mining hardware hash rate in terahashes per second" aria-label="Hash rate in TH/s" style="padding: 5px; border: 2px solid #4f46e5; border-radius: 5px; background: #2d2d5f; color: #ffffff;">
                                </div>
                                <button type="button" class="btn" onclick="calculateProfitability()">Calculate Profitability</button>
                            </div>
                            
                            <div id="profitability-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="insight-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">The Incentive Structure:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>Block Rewards:</strong> New Bitcoin created for successful miners</li>
                            <li><strong>Transaction Fees:</strong> Users pay fees for transaction processing</li>
                            <li><strong>Competition:</strong> Miners compete, driving efficiency and security</li>
                            <li><strong>Self-Regulation:</strong> More miners = higher difficulty = maintained 10-minute blocks</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(7)">I Understand Economic Incentives</button>
                </div>
            </div>
        </div>

        <!-- Principle 8: Network Effects -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(8)">
                <span>Principle 8: Network Effects (Why Bitcoin Becomes Stronger Over Time)</span>
                <span class="principle-icon" id="icon-8">▼</span>
            </div>
            <div class="principle-content" id="content-8">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">First Principles Question:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"How does Bitcoin become more valuable and secure as more people use it?"</strong>
                        </p>
                        <p>
                            We've solved the technical problems, but how does Bitcoin grow from a small 
                            experiment to a global monetary system? What makes it stronger over time 
                            rather than weaker?
                        </p>
                    </div>
                    
                    <div class="solution-box">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Insight: Positive Feedback Loops</h4>
                        <p style="margin-bottom: 15px;">
                            Bitcoin exhibits network effects - it becomes more valuable and secure as 
                            more people use it. This creates positive feedback loops that strengthen 
                            the system over time.
                        </p>
                        
                        <div class="demo-container">
                            <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Demo: Network Growth Simulation</h4>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="users">1,000</div>
                                    <div class="stat-label">Active Users</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="miners">10</div>
                                    <div class="stat-label">Miners</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="security">Low</div>
                                    <div class="stat-label">Network Security</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="value">$1</div>
                                    <div class="stat-label">Bitcoin Value</div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <button type="button" class="btn" onclick="simulateGrowth()">🚀 Simulate Network Growth</button>
                                <button type="button" class="btn" onclick="resetNetwork()" style="background: linear-gradient(45deg, #6c757d, #5a6268); margin-left: 10px;">🔄 Reset Network</button>
                            </div>
                            
                            <div id="growth-result" style="margin-top: 15px;"></div>
                        </div>
                    </div>
                    
                    <div class="insight-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">The Network Effects:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>More Users → More Value:</strong> Increased demand drives up price</li>
                            <li><strong>Higher Price → More Miners:</strong> More profitable to secure the network</li>
                            <li><strong>More Miners → More Security:</strong> Harder to attack the network</li>
                            <li><strong>More Security → More Trust:</strong> Attracts more users and institutions</li>
                            <li><strong>More Adoption → More Development:</strong> Better tools and infrastructure</li>
                        </ul>
                    </div>
                    
                    <div class="demo-container">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">Bitcoin's Journey: From Experiment to Global Money</h4>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">2009</div>
                                <div class="stat-label">Genesis Block<br>First Bitcoin created</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">2010</div>
                                <div class="stat-label">First Transaction<br>10,000 BTC for pizza</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">2017</div>
                                <div class="stat-label">Mainstream Attention<br>$20,000 per BTC</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">2024</div>
                                <div class="stat-label">Global Adoption<br>Institutional investment</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(8)">I Understand Network Effects</button>
                </div>
            </div>
        </div>

        <!-- Principle 9: Digital Scarcity & Financial Sovereignty -->
        <div class="principle-section">
            <div class="principle-header" onclick="togglePrinciple(9)">
                <span>Principle 9: Digital Scarcity & Financial Sovereignty (Be Your Own Bank)</span>
                <span class="principle-icon" id="icon-9">▼</span>
            </div>
            <div class="principle-content" id="content-9">
                <div class="principle-inner">
                    <div class="insight-box">
                        <h3 style="color: #4f46e5; margin-bottom: 15px;">Final Revelation:</h3>
                        <p style="font-size: 1.1rem; margin-bottom: 15px;">
                            <strong>"What if you could have true digital scarcity AND complete financial sovereignty?"</strong>
                        </p>
                        <p>
                            We've built the technical foundation. Now let's understand what this means for 
                            human freedom and wealth preservation. Bitcoin isn't just better technology - 
                            it's a fundamental shift in monetary sovereignty.
                        </p>
                    </div>
                    
                    <div class="demo-container">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">Interactive Discovery: The 21 Million Revolution</h4>
                        
                        <div class="scenario-explorer">
                            <div class="scenario-question">
                                <strong>Digital Scarcity:</strong> Why 21 million matters
                            </div>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value">21,000,000</div>
                                    <div class="stat-label">Maximum Bitcoin Ever</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="current-supply">19,800,000</div>
                                    <div class="stat-label">Currently Mined</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">∞</div>
                                    <div class="stat-label">Fiat Dollars (No Limit)</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">50%</div>
                                    <div class="stat-label">Reward Cut Every 4 Years</div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <button type="button" class="btn" onclick="showScarcityComparison('gold')" style="margin: 5px;">vs Gold</button>
                                <button type="button" class="btn" onclick="showScarcityComparison('land')" style="margin: 5px;">vs Real Estate</button>
                                <button type="button" class="btn" onclick="showScarcityComparison('art')" style="margin: 5px;">vs Art</button>
                                <button type="button" class="btn" onclick="showScarcityComparison('stocks')" style="margin: 5px;">vs Stocks</button>
                            </div>
                            
                            <div id="scarcity-result" style="margin-top: 15px;"></div>
                        </div>
                        
                        <div class="scenario-explorer" style="margin-top: 30px;">
                            <div class="scenario-question">
                                <strong>Financial Sovereignty:</strong> What "Be Your Own Bank" Really Means
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <button type="button" class="btn" onclick="showSovereigntyExample('custody')" style="margin: 5px;">Self-Custody</button>
                                <button type="button" class="btn" onclick="showSovereigntyExample('borders')" style="margin: 5px;">Cross Borders</button>
                                <button type="button" class="btn" onclick="showSovereigntyExample('permissionless')" style="margin: 5px;">No Permission</button>
                                <button type="button" class="btn" onclick="showSovereigntyExample('censorship')" style="margin: 5px;">Censorship Resistant</button>
                            </div>
                            
                            <div id="sovereignty-result" style="margin-top: 15px;"></div>
                        </div>
                        
                        <div class="scenario-explorer" style="margin-top: 30px;">
                            <div class="scenario-question">
                                <strong>Time Preference:</strong> Why Bitcoin Changes How We Think About Time
                            </div>
                            
                            <div style="margin: 20px 0;">
                                <label>Years of Savings:</label>
                                <input type="range" id="time-slider" min="0" max="40" value="10" style="width: 200px; margin: 0 10px;">
                                <span id="time-display">10 years</span>
                            </div>
                            
                            <div id="time-result" class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="fiat-value">$10,000</div>
                                    <div class="stat-label">Fiat Purchasing Power</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="bitcoin-value">1 BTC</div>
                                    <div class="stat-label">Bitcoin Holdings</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="insight-box" style="margin-top: 30px;">
                        <h4 style="color: #28a745; margin-bottom: 15px;">The Complete Revolution:</h4>
                        <ul style="margin-left: 20px;">
                            <li><strong>True Scarcity:</strong> First time in human history we have mathematically provable digital scarcity</li>
                            <li><strong>Self-Custody:</strong> You hold your keys, you hold your wealth - no third party risk</li>
                            <li><strong>Borderless:</strong> Move value anywhere in the world without permission</li>
                            <li><strong>Neutral:</strong> No government, corporation, or individual can control it</li>
                            <li><strong>Sound Money:</strong> Encourages saving and long-term thinking</li>
                            <li><strong>Financial Inclusion:</strong> Anyone with internet can participate in the global economy</li>
                        </ul>
                    </div>
                    
                    <div class="problem-box" style="margin-top: 20px;">
                        <h4 style="color: #ffd700; margin-bottom: 15px;">This Changes Everything:</h4>
                        <p style="margin-bottom: 15px;">
                            Bitcoin isn't just "digital gold" or "internet money." It's the first technology that allows 
                            humans to achieve true monetary sovereignty. For the first time in history, individuals can:
                        </p>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>Own wealth that can't be printed away by inflation</li>
                            <li>Move value without banks, governments, or payment processors</li>
                            <li>Preserve wealth across generations with mathematical certainty</li>
                            <li>Participate in a global economy without anyone's permission</li>
                        </ul>
                        <p><strong>This is why Bitcoin matters. This is why it's inevitable.</strong></p>
                    </div>
                    
                    <button class="btn btn-success" onclick="completePrinciple(9)">I Understand Bitcoin's True Value</button>
                </div>
            </div>
        </div>

        <!-- Course Completion Section -->
        <div style="text-align: center; margin: 40px 0; padding: 30px; background: rgba(40, 167, 69, 0.1); border-radius: 15px; border: 2px solid rgba(40, 167, 69, 0.3);">
            <h2 style="color: #28a745; margin-bottom: 15px;">🎉 Congratulations! You've Mastered Bitcoin's First Principles</h2>
            <p style="font-size: 1.1rem; margin-bottom: 20px;">
                You now understand the fundamental innovations that make Bitcoin revolutionary. 
                You've seen why it's not just better money—it's inevitable money.
            </p>
            <div class="insight-box">
                <h3 style="color: #28a745; margin-bottom: 15px;">🚀 Next Steps in Your Bitcoin Journey:</h3>
                <ul style="text-align: left; margin-left: 40px;">
                    <li><strong>Practice:</strong> Start with small amounts and learn self-custody</li>
                    <li><strong>Deep Dive:</strong> Read "The Bitcoin Standard" by Saifedean Ammous</li>
                    <li><strong>Technical:</strong> Explore Bitcoin's technical documentation</li>
                    <li><strong>Community:</strong> Join Bitcoin meetups and online communities</li>
                    <li><strong>Build:</strong> Contribute to Bitcoin development and education</li>
                </ul>
            </div>
            <button type="button" class="btn btn-success" onclick="resetAllProgress()">🔄 Review Principles Again</button>
            <button type="button" class="btn" onclick="openBitcoinPaper()">📄 Read Satoshi's Original Paper</button>
        </div>
    </div>

    <script>
        let completedPrinciples = 0;
        let currentOpenPrinciple = null;
        let networkUsers = 1000;
        let networkMiners = 10;
        let networkValue = 1;
        let blockchainBlocks = 1;
        let ledgerEntries = [];
        
        // UTXO (Unspent Transaction Output) tracking
        let utxoSet = {
            'Alice': [{ amount: 50, txid: 'genesis', output: 0 }],
            'Bob': [],
            'Charlie': [],
            'Dave': []
        };

        // Improved hash function for demos (SHA-256 simulation)
        function simpleHash(input) {
            let hash = 0;
            for (let i = 0; i < input.length; i++) {
                const char = input.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            // Make it more realistic - convert to proper hex format
            const hashHex = Math.abs(hash).toString(16).padStart(8, '0');
            // Simulate more realistic Bitcoin-style hash with leading zeros for difficulty
            const leadingZeros = Math.floor(Math.random() * 3); // 0-2 leading zeros normally
            return '0'.repeat(leadingZeros) + hashHex.substring(leadingZeros);
        }

        // Proper proof-of-work hash function - completely random for demo
        function proofOfWorkHash(input, nonce) {
            const data = input + nonce.toString() + Math.random().toString();
            let hash = 0;
            for (let i = 0; i < data.length; i++) {
                const char = data.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            // Add more randomness
            hash = hash ^ Math.floor(Math.random() * 1000000);
            return Math.abs(hash).toString(16).padStart(8, '0');
        }

        // New Interactive Demo Functions for Principle 0
        const moneyData = {
            shells: {
                scarcity: 1, durability: 1, divisibility: 1, portability: 2, verifiability: 1, fungibility: 2,
                descriptions: {
                    scarcity: "Easy to find more shells on beaches",
                    durability: "Break easily, degrade over time", 
                    divisibility: "Can't split a shell into smaller pieces",
                    portability: "Light but bulky in large amounts",
                    verifiability: "Hard to distinguish from fakes",
                    fungibility: "All shells are different sizes/shapes"
                }
            },
            gold: {
                scarcity: 5, durability: 5, divisibility: 3, portability: 2, verifiability: 4, fungibility: 5,
                descriptions: {
                    scarcity: "Limited supply, hard to mine",
                    durability: "Lasts forever, doesn't corrode",
                    divisibility: "Can melt and reshape, but impractical",
                    portability: "Very heavy to transport",
                    verifiability: "Can be tested but requires expertise",
                    fungibility: "Pure gold is perfectly interchangeable"
                }
            },
            fiat: {
                scarcity: 1, durability: 2, divisibility: 5, portability: 4, verifiability: 3, fungibility: 4,
                descriptions: {
                    scarcity: "Can be printed infinitely by governments",
                    durability: "Paper wears out, digital records can be lost",
                    divisibility: "Easily divided into smaller denominations", 
                    portability: "Digital form is very portable",
                    verifiability: "Security features but can be counterfeited",
                    fungibility: "Each dollar is worth the same (mostly)"
                }
            },
            bitcoin: {
                scarcity: 5, durability: 5, divisibility: 5, portability: 5, verifiability: 5, fungibility: 4,
                descriptions: {
                    scarcity: "Fixed supply of 21 million, mathematically enforced",
                    durability: "Digital, can't degrade if properly stored",
                    divisibility: "Divisible to 8 decimal places (100M satoshis)",
                    portability: "Can send anywhere instantly with internet",
                    verifiability: "Cryptographically verifiable by anyone",
                    fungibility: "Each bitcoin equal, but transaction history visible"
                }
            }
        };

        function selectMoney(moneyType) {
            // Update button states
            document.querySelectorAll('.money-option').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${moneyType}`).classList.add('active');
            
            const data = moneyData[moneyType];
            
            // Update property scores and descriptions
            const properties = ['scarcity', 'durability', 'divisibility', 'portability', 'verifiability', 'fungibility'];
            properties.forEach(prop => {
                const scoreEl = document.getElementById(`score-${prop}`);
                const descEl = document.getElementById(`desc-${prop}`);
                
                if (scoreEl && descEl) {
                    scoreEl.textContent = '⭐'.repeat(data[prop]) + '☆'.repeat(5 - data[prop]);
                    descEl.textContent = data.descriptions[prop];
                }
            });
        }

        const timelineEvents = {
            barter: {
                title: "Barter System (10,000 BCE)",
                description: "Direct exchange of goods and services without money.",
                limitations: "Requires double coincidence of wants, indivisible goods, no store of value."
            },
            commodity: {
                title: "Commodity Money (3000 BCE)", 
                description: "Cattle, grain, salt used as money. Valuable in themselves.",
                limitations: "Perishable, hard to transport, not uniform in quality."
            },
            metal: {
                title: "Metal Coins (700 BCE)",
                description: "Gold and silver coins standardized trade and store of value.",
                limitations: "Heavy to transport, can be debased by rulers, still requires trust in issuer."
            },
            gold: {
                title: "Gold Standard (1792-1933)",
                description: "Paper money backed by gold reserves. Combined portability with scarcity.",
                limitations: "Limited by gold supply, vulnerable to bank runs, abandoned during wars."
            },
            fiat: {
                title: "Fiat Currency (1971-present)",
                description: "Money backed only by government promise and force. Maximum flexibility.",
                limitations: "Infinite inflation potential, requires trust in government, can be weaponized."
            },
            bitcoin: {
                title: "Bitcoin (2009-present)",
                description: "Digital money with mathematically enforced scarcity and no central authority.",
                limitations: "Still young, volatile, energy intensive, limited throughput (currently)."
            }
        };

        function showTimelineEvent(period) {
            const event = timelineEvents[period];
            const result = document.getElementById('timeline-result');
            
            if (result && event) {
                result.innerHTML = `
                    <div class="insight-box">
                        <h4 style="color: #4f46e5;">${event.title}</h4>
                        <p><strong>Innovation:</strong> ${event.description}</p>
                        <p><strong>Limitations:</strong> ${event.limitations}</p>
                    </div>
                `;
            }
        }

        // New Interactive Demo Functions for Principle 2
        const ledgerKeeperData = {
            centralBank: {
                title: "Central Bank Ledger",
                risks: ["Can freeze your account for political reasons", "May devalue currency through money printing", "Subject to government pressure and corruption"],
                benefits: ["Regulated and supervised", "Deposit insurance up to limits", "Established legal framework"],
                realExample: "The Federal Reserve can create trillions of dollars instantly, as seen in 2008 and 2020 crises.",
                trustScore: 2
            },
            techCompany: {
                title: "Tech Company Ledger", 
                risks: ["Profit motive may conflict with user interests", "Can change terms of service anytime", "Single point of failure if company fails"],
                benefits: ["Innovation and user experience focused", "Technical expertise", "Market competition drives improvement"],
                realExample: "PayPal froze WikiLeaks donations in 2010, showing how companies can be pressured to restrict payments.",
                trustScore: 2
            },
            cooperative: {
                title: "Democratic Cooperative",
                risks: ["Slow decision making through consensus", "Susceptible to majority tyranny", "May lack technical expertise"],
                benefits: ["Member-owned and controlled", "Aligned incentives with users", "Democratic governance"],
                realExample: "Credit unions operate this way, but still subject to government regulations and potential member conflicts.",
                trustScore: 3
            },
            algorithm: {
                title: "Algorithmic System",
                risks: ["Code bugs could cause permanent losses", "Difficult to upgrade or fix issues", "No human recourse for mistakes"],
                benefits: ["No human bias or corruption", "Transparent and predictable rules", "Cannot be coerced or bribed"],
                realExample: "Bitcoin has operated for 15+ years with no successful attacks on its core algorithm, despite being worth hundreds of billions.",
                trustScore: 4
            }
        };

        function testLedgerKeeper(keeperType) {
            const data = ledgerKeeperData[keeperType];
            const result = document.getElementById('ledger-keeper-result');
            
            if (result && data) {
                const trustStars = '⭐'.repeat(data.trustScore) + '☆'.repeat(5 - data.trustScore);
                
                result.innerHTML = `
                    <div class="solution-box">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">${data.title}</h4>
                        <div style="margin-bottom: 15px;">
                            <strong>Trust Score: ${trustStars}</strong>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong style="color: #dc3545;">Risks:</strong>
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                ${data.risks.map(risk => `<li>${risk}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong style="color: #28a745;">Benefits:</strong>
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                ${data.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div>
                            <strong>Real World Example:</strong> ${data.realExample}
                        </div>
                    </div>
                `;
            }
        }

        const trustFailures = {
            paypal: {
                title: "PayPal WikiLeaks Freeze (2010)",
                description: "PayPal froze WikiLeaks donation account after government pressure, showing how payment processors can be weaponized for political control.",
                impact: "Prevented public from donating to journalism organization, demonstrating censorship power of centralized payment systems."
            },
            canada: {
                title: "Canadian Trucker Convoy (2022)", 
                description: "Canadian government froze bank accounts of truckers and donors protesting COVID mandates, without court orders.",
                impact: "Showed how governments can instantly cut off citizens from financial system for political dissent, affecting hundreds of accounts."
            },
            russia: {
                title: "Russian SWIFT Exclusion (2022)",
                description: "Western nations excluded Russian banks from SWIFT payment network after Ukraine invasion, affecting millions of civilians.",
                impact: "Demonstrated how global payment infrastructure can be weaponized geopolitically, trapping ordinary citizens."
            },
            'mt-gox': {
                title: "Mt. Gox Exchange Collapse (2014)",
                description: "World's largest Bitcoin exchange lost 850,000 bitcoins (7% of all Bitcoin) due to hacking and mismanagement.", 
                impact: "Showed risks of trusting centralized Bitcoin services - users lost $450 million worth of Bitcoin permanently."
            }
        };

        function showTrustFailure(failureType) {
            const failure = trustFailures[failureType];
            const result = document.getElementById('trust-failure-result');
            
            if (result && failure) {
                result.innerHTML = `
                    <div class="problem-box">
                        <h4 style="color: #dc3545;">${failure.title}</h4>
                        <p><strong>What Happened:</strong> ${failure.description}</p>
                        <p><strong>Impact:</strong> ${failure.impact}</p>
                    </div>
                `;
            }
        }

        function togglePrinciple(principleNum) {
            const content = document.getElementById(`content-${principleNum}`);
            const icon = document.getElementById(`icon-${principleNum}`);
            
            // Close currently open principle if different
            if (currentOpenPrinciple && currentOpenPrinciple !== principleNum) {
                const currentContent = document.getElementById(`content-${currentOpenPrinciple}`);
                const currentIcon = document.getElementById(`icon-${currentOpenPrinciple}`);
                if (currentContent) currentContent.classList.remove('active');
                if (currentIcon) currentIcon.textContent = '▼';
            }
            
            // Toggle current principle
            if (content && icon) {
                if (content.classList.contains('active')) {
                    content.classList.remove('active');
                    icon.textContent = '▼';
                    currentOpenPrinciple = null;
                } else {
                    content.classList.add('active');
                    icon.textContent = '▲';
                    currentOpenPrinciple = principleNum;
                }
            }
        }

        function completePrinciple(principleNum) {
            if (principleNum > completedPrinciples) {
                completedPrinciples = principleNum + 1;
                updateProgress();
                
                // Auto-open next principle
                if (principleNum < 9) {
                    setTimeout(() => {
                        togglePrinciple(principleNum + 1);
                    }, 1000);
                }
            }
        }

        function updateProgress() {
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            const percentage = (completedPrinciples / 10) * 100;
            
            if (progressFill) progressFill.style.width = percentage + '%';
            if (progressText) progressText.textContent = `${completedPrinciples}/10 Principles Understood`;
        }

        // Principle 1: Double-Spending Demo
        function attemptDoubleSpend() {
            const result = document.getElementById('double-spend-result');
            const coin2 = document.getElementById('coin2');
            
            if (coin2) {
                coin2.style.opacity = '1';
                coin2.style.background = '#dc3545';
            }
            
            setTimeout(() => {
                if (result) {
                    result.innerHTML = `
                        <div class="problem-box">
                            <strong>Attack Failed!</strong><br>
                            Without a shared ledger, Bob and Charlie can't tell if Alice's coin is real or fake. 
                            This is why we need a single source of truth that everyone can verify.
                        </div>
                    `;
                }
            }, 1000);
        }

        function resetAllProgress() {
            completedPrinciples = 0;
            currentOpenPrinciple = null;
            networkUsers = 1000;
            networkMiners = 10;
            networkValue = 1;
            blockchainBlocks = 1;
            
            updateProgress();
            
            // Reset all principles
            for (let i = 0; i <= 9; i++) {
                const content = document.getElementById(`content-${i}`);
                const icon = document.getElementById(`icon-${i}`);
                if (content) content.classList.remove('active');
                if (icon) icon.textContent = '▼';
            }
            
            // Clear results
            const resultDivs = ['double-spend-result', 'trust-result', 'consensus-result', 'puzzle-result', 'tamper-result', 'signature-result', 'profitability-result', 'growth-result', 'timeline-result', 'ledger-keeper-result', 'trust-failure-result'];
            resultDivs.forEach(id => {
                const div = document.getElementById(id);
                if (div) div.innerHTML = '';
            });
        }

        function openBitcoinPaper() {
            window.open('https://bitcoin.org/bitcoin.pdf', '_blank');
        }
        
        // Principle 3: Consensus functions
        function simulateConsensus() {
            const votes = ['Accept', 'Accept', 'Accept', 'Reject', 'Accept'];
            const dishonest = [false, false, false, true, false];
            
            for (let i = 1; i <= 5; i++) {
                const voteElement = document.getElementById(`vote${i}`);
                if (dishonest[i-1]) {
                    voteElement.textContent = 'Reject';
                    voteElement.style.color = '#dc3545';
                } else {
                    voteElement.textContent = 'Accept';
                    voteElement.style.color = '#28a745';
                }
            }
            
            document.getElementById('consensus-result').innerHTML = `
                <div class="result-box" style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
                    <strong>Result:</strong> Transaction ACCEPTED by majority (4/5 nodes)
                    <br><small>Note: Even with one dishonest node, honest majority wins!</small>
                </div>
            `;
        }
        
        function addMaliciousNodes() {
            document.getElementById('consensus-result').innerHTML = `
                <div class="result-box" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
                    <strong>Problem:</strong> If we add more malicious nodes without Proof of Work, they could create millions of fake identities!
                    <br><small>This is why we need Proof of Work (next principle)...</small>
                </div>
            `;
        }
        
        // Principle 4: Proof of Work functions
        function tryPuzzle(attempt) {
            const hashes = {
                1: 'a4b2f1e8c9d3...',
                2: 'f7e1b3a9c2d5...',
                3: '0000a1b2c3d4...', // This one starts with 0000
                4: 'c8d2e1f3a9b7...'
            };
            
            const hashElement = document.getElementById(`hash${attempt}`);
            hashElement.textContent = hashes[attempt];
            
            const puzzlePiece = document.getElementById(`puzzle${attempt}`);
            
            if (attempt === 3) {
                puzzlePiece.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                hashElement.style.color = '#28a745';
                document.getElementById('puzzle-result').innerHTML = `
                    <div class="result-box" style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
                        <strong>🎉 Puzzle Solved!</strong> Number 3 produces a hash starting with 0000...
                        <br><small>This represents the computational work needed to "vote" in Bitcoin</small>
                    </div>
                `;
            } else {
                puzzlePiece.style.background = 'linear-gradient(45deg, #dc3545, #c82333)';
                hashElement.style.color = '#dc3545';
            }
        }
        
        function autoSolvePuzzle() {
            let attempts = 0;
            const interval = setInterval(() => {
                attempts++;
                if (attempts <= 3) {
                    tryPuzzle(attempts);
                }
                if (attempts >= 3) {
                    clearInterval(interval);
                }
            }, 1000);
        }
        
        function resetPuzzle() {
            for (let i = 1; i <= 4; i++) {
                const hashElement = document.getElementById(`hash${i}`);
                const puzzlePiece = document.getElementById(`puzzle${i}`);
                if (hashElement) hashElement.textContent = 'Click to hash';
                if (hashElement) hashElement.style.color = '#ffffff';
                if (puzzlePiece) puzzlePiece.style.background = 'linear-gradient(45deg, #4f46e5, #7c3aed)';
            }
            const puzzleResult = document.getElementById('puzzle-result');
            if (puzzleResult) puzzleResult.innerHTML = '';
        }
        
        // Principle 5: Blockchain functions
        let blockchainData = [
            { id: 0, data: 'Genesis', hash: '000a1b2c...' }
        ];
        
        function addTransaction() {
            const txInput = document.getElementById('new-tx');
            if (!txInput) return;
            const transaction = txInput.value;
            if (!transaction) return;
            
            const newBlock = {
                id: blockchainData.length,
                data: transaction,
                hash: generateHash(transaction)
            };
            
            blockchainData.push(newBlock);
            updateChainVisual();
            updateLedger(transaction);
            txInput.value = '';
        }
        
        function generateHash(data) {
            // Simulate hash generation
            const hashes = ['000b1c2d...', '000c2d3e...', '000d3e4f...', '000e4f5g...'];
            return hashes[Math.floor(Math.random() * hashes.length)];
        }
        
        function updateChainVisual() {
            const chainVisual = document.getElementById('chain-visual');
            if (!chainVisual) return;
            chainVisual.innerHTML = '';
            
            blockchainData.forEach((block, index) => {
                const blockDiv = document.createElement('div');
                blockDiv.className = 'block';
                blockDiv.innerHTML = `
                    <div>Block ${block.id}</div>
                    <div>${block.data}</div>
                    <div>Hash: ${block.hash}</div>
                `;
                chainVisual.appendChild(blockDiv);
            });
        }
        
        function updateLedger(transaction) {
            const ledgerEntries = document.getElementById('ledger-entries');
            if (!ledgerEntries) return;
            const entryDiv = document.createElement('div');
            entryDiv.className = 'ledger-entry';
            entryDiv.innerHTML = `
                <div class="entry-time">Block ${blockchainData.length - 1}</div>
                <div class="entry-tx">${transaction}</div>
                <div class="entry-balance">Updated balances...</div>
            `;
            ledgerEntries.appendChild(entryDiv);
        }
        
        function attemptTamper() {
            const tamperResult = document.getElementById('tamper-result');
            if (!tamperResult) return;
            
            if (blockchainData.length > 1) {
                tamperResult.innerHTML = `
                    <div class="result-box" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
                        <strong>❌ Tampering Detected!</strong> To change Block 1, you would need to:
                        <br>1. Redo the Proof of Work for Block 1
                        <br>2. Redo the Proof of Work for Block 2
                        <br>3. Continue for ALL subsequent blocks
                        <br><small>This makes the blockchain practically immutable!</small>
                    </div>
                `;
            } else {
                tamperResult.innerHTML = `
                    <div class="result-box" style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 5px;">
                        <strong>Add a transaction first!</strong> Then try to tamper with the blockchain.
                    </div>
                `;
            }
        }
        
        // Principle 6: Digital Signatures functions
        let keyPair = null;
        let currentMessage = '';
        let currentSignature = '';
        
        function generateKeyPair() {
            keyPair = {
                privateKey: 'E9873D79C6D87DC0FB6A5778633389F4453213303DA61F20BD67FC233AA33262',
                publicKey: '03D4B4A4E1D1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF123456'
            };
            
            const privateKeyEl = document.getElementById('private-key');
            const publicKeyEl = document.getElementById('public-key');
            if (privateKeyEl) privateKeyEl.textContent = keyPair.privateKey;
            if (publicKeyEl) publicKeyEl.textContent = keyPair.publicKey;
        }
        
        function signMessage() {
            if (!keyPair) {
                alert('Generate a key pair first!');
                return;
            }
            
            const messageInput = document.getElementById('message-to-sign');
            if (!messageInput) return;
            const message = messageInput.value;
            if (!message) {
                alert('Enter a message to sign!');
                return;
            }
            
            currentMessage = message;
            currentSignature = 'A1B2C3D4E5F6789012345678901234567890ABCDEF1234567890ABCDEF123456789012345678901234567890ABCDEF';
            
            const signatureEl = document.getElementById('signature');
            if (signatureEl) signatureEl.textContent = currentSignature;
        }
        
        function verifySignature() {
            if (!currentSignature || !currentMessage) {
                alert('Sign a message first!');
                return;
            }
            
            const signatureResult = document.getElementById('signature-result');
            if (signatureResult) {
                signatureResult.innerHTML = `
                    <div class="result-box" style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
                        <strong>✅ Signature Valid!</strong> This signature was created with the private key that matches the public key.
                        <br><small>Anyone can verify this without seeing the private key!</small>
                    </div>
                `;
            }
        }
        
        function simulateInvalidSignature() {
            const signatureResult = document.getElementById('signature-result');
            if (signatureResult) {
                signatureResult.innerHTML = `
                    <div class="result-box" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
                        <strong>❌ Invalid Signature!</strong> This signature doesn't match the message or public key.
                        <br><small>This proves the private key holder didn't authorize this transaction.</small>
                    </div>
                `;
            }
        }
        
        // Principle 7: Economic Incentives functions
        function calculateProfitability() {
            const electricityInput = document.getElementById('electricity-cost');
            const hashRateInput = document.getElementById('hash-rate');
            if (!electricityInput || !hashRateInput) return;
            
            const electricityCost = parseFloat(electricityInput.value);
            const hashRate = parseFloat(hashRateInput.value);
            
            // Simplified calculation
            const dailyRevenue = (hashRate / 400000000) * 6.40 * 43000; // Very simplified
            const dailyCost = 24 * 3.5 * electricityCost; // 3.5 kW consumption estimate
            const dailyProfit = dailyRevenue - dailyCost;
            
            const profitabilityResult = document.getElementById('profitability-result');
            if (profitabilityResult) {
                profitabilityResult.innerHTML = `
                    <div class="result-box" style="background: ${dailyProfit > 0 ? '#d4edda' : '#f8d7da'}; color: ${dailyProfit > 0 ? '#155724' : '#721c24'}; padding: 15px; border-radius: 5px;">
                        <strong>Daily Mining Results:</strong><br>
                        Revenue: $${dailyRevenue.toFixed(2)}<br>
                        Electricity Cost: $${dailyCost.toFixed(2)}<br>
                        Profit: $${dailyProfit.toFixed(2)}<br>
                        <small>This creates incentive to secure the network!</small>
                    </div>
                `;
            }
        }
        
        // Principle 8: Network Effects functions
        let networkStats = {
            users: 1000,
            miners: 10,
            security: 'Low',
            value: 1
        };
        
        function simulateGrowth() {
            networkStats.users *= 2;
            networkStats.miners *= 1.5;
            networkStats.value *= 3;
            
            if (networkStats.users > 100000) {
                networkStats.security = 'High';
            } else if (networkStats.users > 10000) {
                networkStats.security = 'Medium';
            }
            
            const usersEl = document.getElementById('users');
            const minersEl = document.getElementById('miners');
            const securityEl = document.getElementById('security');
            const valueEl = document.getElementById('value');
            
            if (usersEl) usersEl.textContent = Math.floor(networkStats.users).toLocaleString();
            if (minersEl) minersEl.textContent = Math.floor(networkStats.miners);
            if (securityEl) securityEl.textContent = networkStats.security;
            if (valueEl) valueEl.textContent = '$' + Math.floor(networkStats.value);
            
            const growthResult = document.getElementById('growth-result');
            if (growthResult) {
                growthResult.innerHTML = `
                    <div class="result-box" style="background: #d4edda; color: #155724; padding: 15px; border-radius: 5px;">
                        <strong>🚀 Network Growing!</strong> Notice how all metrics improve together.
                        <br><small>This positive feedback loop makes Bitcoin stronger over time.</small>
                    </div>
                `;
            }
        }
        
        function resetNetwork() {
            networkStats = { users: 1000, miners: 10, security: 'Low', value: 1 };
            const usersEl = document.getElementById('users');
            const minersEl = document.getElementById('miners');
            const securityEl = document.getElementById('security');
            const valueEl = document.getElementById('value');
            const growthResult = document.getElementById('growth-result');
            
            if (usersEl) usersEl.textContent = '1,000';
            if (minersEl) minersEl.textContent = '10';
            if (securityEl) securityEl.textContent = 'Low';
            if (valueEl) valueEl.textContent = '$1';
            if (growthResult) growthResult.innerHTML = '';
        }
        
        // Principle 9: Scarcity and Sovereignty functions
        function showScarcityComparison(asset) {
            const comparisons = {
                gold: {
                    title: 'Bitcoin vs Gold',
                    content: `
                        <strong>Gold:</strong> ~2% annual inflation (new mining)<br>
                        <strong>Bitcoin:</strong> Decreasing inflation, approaching 0%<br>
                        <strong>Advantage:</strong> Bitcoin has a hard cap, gold supply keeps growing
                    `
                },
                land: {
                    title: 'Bitcoin vs Real Estate',
                    content: `
                        <strong>Land:</strong> Can be seized, taxed, requires maintenance<br>
                        <strong>Bitcoin:</strong> Cannot be seized if properly secured<br>
                        <strong>Advantage:</strong> True ownership without geographical constraints
                    `
                },
                art: {
                    title: 'Bitcoin vs Art/Collectibles',
                    content: `
                        <strong>Art:</strong> Subjective value, can be counterfeited<br>
                        <strong>Bitcoin:</strong> Mathematically verifiable scarcity<br>
                        <strong>Advantage:</strong> Objective, programmable scarcity
                    `
                },
                stocks: {
                    title: 'Bitcoin vs Stocks',
                    content: `
                        <strong>Stocks:</strong> Companies can issue more shares<br>
                        <strong>Bitcoin:</strong> No entity can create more Bitcoin<br>
                        <strong>Advantage:</strong> True digital scarcity, no dilution risk
                    `
                }
            };
            
            const comparison = comparisons[asset];
            const scarcityResult = document.getElementById('scarcity-result');
            if (scarcityResult) {
                scarcityResult.innerHTML = `
                    <div class="result-box" style="background: #e7f3ff; color: #004085; padding: 15px; border-radius: 5px;">
                        <strong>${comparison.title}</strong><br>
                        ${comparison.content}
                    </div>
                `;
            }
        }
        
        function showSovereigntyExample(type) {
            const examples = {
                custody: {
                    title: 'Self-Custody',
                    content: `
                        With Bitcoin, YOU control your wealth directly. No bank can freeze your account, 
                        no government can seize it without your private keys. You are your own bank.
                    `
                },
                borders: {
                    title: 'Borderless Value Transfer',
                    content: `
                        Send $1 million to Japan or $10 to Nigeria - same process, same low fees. 
                        No currency controls, no permission needed, settles in ~10 minutes globally.
                    `
                },
                permissionless: {
                    title: 'No Permission Required',
                    content: `
                        No credit checks, no account applications, no minimum balances. 
                        If you have internet, you can participate in the global Bitcoin economy.
                    `
                },
                censorship: {
                    title: 'Censorship Resistance',
                    content: `
                        No single entity can stop Bitcoin transactions. Even if some countries ban it, 
                        the network continues operating globally through thousands of nodes.
                    `
                }
            };
            
            const example = examples[type];
            const sovereigntyResult = document.getElementById('sovereignty-result');
            if (sovereigntyResult) {
                sovereigntyResult.innerHTML = `
                    <div class="result-box" style="background: #fff3cd; color: #856404; padding: 15px; border-radius: 5px;">
                        <strong>${example.title}</strong><br>
                        ${example.content}
                    </div>
                `;
            }
        }
        
        // Time preference slider event listener
        document.addEventListener('DOMContentLoaded', function() {
            const timeSlider = document.getElementById('time-slider');
            if (timeSlider) {
                timeSlider.addEventListener('input', function() {
                    const years = this.value;
                    const timeDisplay = document.getElementById('time-display');
                    if (timeDisplay) timeDisplay.textContent = years + ' years';
                    
                    // Simulate inflation effects on fiat vs Bitcoin appreciation
                    const inflationRate = 0.03; // 3% annually
                    const bitcoinAppreciation = 0.20; // 20% annually (historical average)
                    
                    const fiatValue = 10000 * Math.pow((1 - inflationRate), years);
                    const btcImpliedValue = 10000 * Math.pow((1 + bitcoinAppreciation), years);
                    
                    const fiatValueEl = document.getElementById('fiat-value');
                    const bitcoinValueEl = document.getElementById('bitcoin-value');
                    if (fiatValueEl) fiatValueEl.textContent = '$' + Math.floor(fiatValue).toLocaleString();
                    if (bitcoinValueEl) bitcoinValueEl.textContent = '1 BTC (~$' + Math.floor(btcImpliedValue).toLocaleString() + ')';
                });
            }
        });

        // Initialize
        updateProgress();
        selectMoney('shells'); // Initialize with shells selected
    </script>

</body>
</html>
